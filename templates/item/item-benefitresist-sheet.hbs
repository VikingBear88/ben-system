<!-- systems/ben-system/templates/item/item-benefitresist-sheet.hbs -->
<form class="ben-item ben-benefitresist" autocomplete="off">

  <!-- Header: two selects + profile image -->
  <header class="br-header">
    <div class="field">
      <label>Damage Type</label>
      <select name="system.damageType">
        {{#select system.damageType}}
          <option value="None">None</option>
          <option value="Acid">Acid</option>
          <option value="Bludgeoning">Bludgeoning</option>
          <option value="Cold">Cold</option>
          <option value="Fire">Fire</option>
          <option value="Force">Force</option>
          <option value="Lightning">Lightning</option>
          <option value="Necrotic">Necrotic</option>
          <option value="Piercing">Piercing</option>
          <option value="Poison">Poison</option>
          <option value="Psychic">Psychic</option>
          <option value="Radiant">Radiant</option>
          <option value="Slashing">Slashing</option>
          <option value="Sonic">Sonic</option>
          <option value="Bleeding">Bleeding</option>
        {{/select}}
      </select>
    </div>

    <div class="field">
      <label>Mode</label>
      <select name="system.mode">
        {{#select system.mode}}
          <option value="flat">Flat</option>
          <option value="perDice">Per Dice</option>
          <option value="perLevel">Per Status Level</option>
        {{/select}}
      </select>
    </div>

    <!-- Profile image (click to change) -->
    <div class="profile">
      <img class="profile-img" src="{{item.img}}" title="{{item.name}}" data-edit="img"/>
    </div>
  </header>

  <!-- Computed outputs -->
  <table class="ben-table ben-table--tight br-table">
    <thead>
      <tr>
        <th>Field</th>
        <th class="num">Value</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Character Damage</td>
        <td class="num">{{#if ui.characterDamage}}{{ui.characterDamage}}{{else}}0{{/if}}</td>
      </tr>
      <tr>
        <td>Benefit Level</td>
        <td class="num">{{#if ui.benefitLevel}}{{ui.benefitLevel}}{{else}}0{{/if}}</td>
      </tr>
      <tr>
        <td>Resistance</td>
        <td class="num">
          {{#if ui.resistanceText}}{{ui.resistanceText}}{{else}}0{{/if}}
        </td>
      </tr>
    </tbody>
  </table>

  <p class="hint">
    Character Damage is pulled from the actorâ€™s <b>History</b> totals (Damage Taken) for the chosen type.
    Benefit Level and Resistance follow your threshold tables (Flat / Per Dice / Per Status Level).
  </p>

</form>

<style>
  .ben-benefitresist { display: grid; gap: 0.75rem; }

  /* Make room for two selects + a square image on the right */
  .br-header {
    display: grid;
    grid-template-columns: 1fr 1fr 72px; /* last col for 64px image + padding */
    gap: 0.75rem;
    align-items: end;
  }
  .br-header .field { display: flex; flex-direction: column; gap: 4px; }
  .br-header label { font-weight: 600; }
  .br-header select { padding: 4px 6px; }

  .br-header .profile {
    display: flex;
    justify-content: flex-end;
    align-items: center;
  }
  .br-header .profile-img {
    width: 64px; height: 64px; object-fit: cover;
    border: 1px solid rgba(0,0,0,.25); border-radius: 4px;
    cursor: pointer; /* indicates it's editable via data-edit */
  }

  .ben-table { width: 100%; border-collapse: collapse; table-layout: fixed; }
  .ben-table th, .ben-table td { padding: 6px 8px; border: 1px solid rgba(0,0,0,.25); }
  .ben-table thead th { background: #cfe2ff; text-align: left; }
  .ben-table .num { text-align: right; }
  .ben-table--tight th, .ben-table--tight td { padding-top: 4px; padding-bottom: 4px; }

  .hint { margin: 0; font-size: 0.9em; opacity: 0.85; }
</style>
